#!/bin/bash

# update working tree
cd {{pod_dir}}/apps/{{app}}
env -i git pull

# install dependencies in case changed
[ -f package.json ] && npm install
[ -f component.json ] && component install
[ -f Gruntfile.js ] && grunt

# pod restart will not use latest env variables in config
pod stop {{app}}
pod cleanlogs {{app}}
pod start {{app}}